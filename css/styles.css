/* CRM System Styles - Enhanced Modern UI */

:root{
  --bg:#f5f7fa; --card:#ffffff; --ink:#1a202c; --muted:#718096; --accent:#667eea; --ok:#48bb78; --warn:#ed8936; --bad:#f56565;
  --line:#e2e8f0; --chip:#edf2f7; --hover:#f7fafc; --sidebar:#1e293b; --sidebar-hover:#334155;
  --accent-light:#7c8ff0; --accent-dark:#5568d3; --shadow:rgba(0,0,0,0.1); --shadow-lg:rgba(0,0,0,0.15);
  --gradient-1:linear-gradient(135deg, #667eea 0%, #764ba2 100%); --gradient-2:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  --gradient-3:linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); --gradient-4:linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}
html,body{background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;margin:0;padding:0;transition:background 0.3s ease;line-height:1.6;}
*{box-sizing:border-box}
h1,h2,h3{margin:0 0 .6rem 0;font-weight:700;letter-spacing:-0.02em;}

.app-container{display:flex;min-height:100vh;}
.sidebar{width:260px;background:var(--gradient-1);color:white;flex-shrink:0;overflow-y:auto;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);box-shadow:2px 0 10px var(--shadow);}
.sidebar.collapsed{width:60px;}
.sidebar-header{padding:24px 16px;border-bottom:1px solid rgba(255,255,255,0.15);display:flex;align-items:center;justify-content:space-between;}
.sidebar-toggle{background:rgba(255,255,255,0.1);border:none;color:white;cursor:pointer;font-size:1.1rem;padding:8px;border-radius:8px;transition:all 0.2s;backdrop-filter:blur(10px);}
.sidebar-toggle:hover{background:rgba(255,255,255,0.2);transform:scale(1.05);}
.sidebar-menu{list-style:none;padding:8px;margin:0;}
.sidebar-menu li{margin:4px 0;}
.sidebar-menu a{display:flex;align-items:center;padding:12px 14px;color:rgba(255,255,255,0.85);text-decoration:none;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);border-radius:10px;font-weight:500;position:relative;overflow:hidden;}
.sidebar-menu a::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:white;transform:scaleY(0);transition:transform 0.3s;border-radius:0 4px 4px 0;}
.sidebar-menu a:hover{background:rgba(255,255,255,0.15);color:white;transform:translateX(4px);}
.sidebar-menu a.active{background:rgba(255,255,255,0.2);color:white;box-shadow:0 4px 12px rgba(0,0,0,0.15);}
.sidebar-menu a.active::before{transform:scaleY(1);}
.sidebar-menu i{margin-right:12px;font-size:1.15em;width:20px;text-align:center;}
.sidebar-menu span{flex:1;}
.sidebar.collapsed .sidebar-menu span{display:none;}
.sidebar.collapsed .sidebar-header{justify-content:center;}
.sidebar.collapsed .sidebar-menu a{justify-content:center;}

.main-content{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.topbar{background:var(--card);border-bottom:1px solid var(--line);padding:16px 28px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0;box-shadow:0 2px 8px var(--shadow);backdrop-filter:blur(10px);z-index:10;}
.user-menu{display:flex;align-items:center;gap:14px;}
.user-avatar{width:40px;height:40px;border-radius:50%;background:var(--gradient-1);color:white;display:flex;align-items:center;justify-content:center;font-weight:600;box-shadow:0 4px 12px var(--shadow);transition:transform 0.3s;cursor:pointer;}
.user-avatar:hover{transform:scale(1.08);}

.content-area{flex:1;padding:24px;overflow-y:auto}

.wrap{max-width:1400px;margin:0 auto;width:100%;}
.topbar-inner{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:14px;padding-bottom:14px;border-bottom:2px solid var(--line);}
.brand{font-weight:700;letter-spacing:-0.02em;font-size:1.3rem;background:var(--gradient-1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.muted{color:var(--muted);}
.pill{background:var(--chip);border:1px solid var(--line);padding:10px 16px;border-radius:12px;cursor:pointer;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);font-weight:500;font-size:0.9rem;}
.pill:hover{background:var(--hover);transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow);}
.pill[aria-selected="true"]{background:var(--gradient-1);color:#fff;border-color:transparent;box-shadow:0 4px 16px var(--shadow-lg);}
.row{display:flex;gap:14px;flex-wrap:wrap;}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:20px;box-shadow:0 2px 8px var(--shadow);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden;}
.card:hover{box-shadow:0 8px 24px var(--shadow-lg);transform:translateY(-2px);}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--gradient-1);transform:scaleX(0);transition:transform 0.3s;transform-origin:left;}
.card:hover::before{transform:scaleX(1);}
.card h3{margin-bottom:12px;font-size:1.1rem;color:var(--ink);}
.grid{display:grid;gap:14px;}
.grid.cols-2{grid-template-columns:1fr 1fr;}
.grid.cols-3{grid-template-columns:repeat(3,1fr);}
.grid.cols-4{grid-template-columns:repeat(4,1fr);}
@media(max-width:900px){.grid.cols-2,.grid.cols-3,.grid.cols-4{grid-template-columns:1fr;}}

label{font-size:0.875rem;color:var(--muted);display:block;margin-bottom:6px;font-weight:500;}
input,select,textarea,button{background:#fff;color:var(--ink);border:1px solid var(--line);border-radius:10px;padding:11px 14px;font-family:inherit;font-size:inherit;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(102, 126, 234, 0.1);transform:translateY(-1px);}
input[type="checkbox"]{width:18px;height:18px;cursor:pointer;accent-color:var(--accent);}
button{cursor:pointer;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);font-weight:500;box-shadow:0 2px 6px var(--shadow);}
button:hover{transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow-lg);}
button:active{transform:translateY(0);box-shadow:0 2px 6px var(--shadow);}
button:disabled{opacity:0.5;cursor:not-allowed;transform:none;}
button.primary{background:var(--gradient-1);color:#fff;border-color:transparent;font-weight:600;}
button.primary:hover{box-shadow:0 6px 20px rgba(102, 126, 234, 0.4);}
button.good{background:var(--ok);color:#fff;border-color:transparent;font-weight:600;}
button.good:hover{box-shadow:0 6px 20px rgba(72, 187, 120, 0.4);}
button.warn{background:var(--warn);color:#fff;border-color:transparent;font-weight:600;}
button.warn:hover{box-shadow:0 6px 20px rgba(237, 137, 54, 0.4);}
button.bad{background:var(--bad);color:#fff;border-color:transparent;font-weight:600;}
button.bad:hover{box-shadow:0 6px 20px rgba(245, 101, 101, 0.4);}
button.ghost{background:transparent;border-color:var(--line);}
button.ghost:hover{background:var(--hover);}
.toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:10px 0 14px;}

table{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 12px var(--shadow);}
thead{background:var(--gradient-1);color:white;}
th,td{border-bottom:1px solid var(--line);padding:12px 14px;vertical-align:middle;text-align:left;}
th{color:white;font-weight:600;font-size:0.875rem;text-transform:uppercase;letter-spacing:0.05em;}
tbody tr{transition:all 0.2s;}
tbody tr:hover{background:var(--hover);transform:scale(1.001);}
tbody tr:nth-child(even){background:rgba(237, 242, 247, 0.4);}
tbody tr:nth-child(even):hover{background:var(--hover);}
td .chip{background:var(--chip);padding:5px 10px;border-radius:20px;border:1px solid var(--line);font-size:0.85rem;font-weight:500;}
td.actions{white-space:nowrap;}
td[contenteditable="true"]{outline:2px dashed transparent;cursor:text;transition:all 0.2s;}
td[contenteditable="true"]:hover{background:rgba(102, 126, 234, 0.05);}
td[contenteditable="true"]:focus{outline-color:var(--accent);background:rgba(102, 126, 234, 0.1);}

.hint{font-size:0.875rem;color:var(--muted);margin-top:6px;}
.badge{border:1px solid var(--line);background:var(--chip);padding:4px 12px;border-radius:20px;font-size:0.8rem;font-weight:500;display:inline-block;transition:all 0.2s;}
.badge:hover{transform:scale(1.05);box-shadow:0 2px 8px var(--shadow);}

.hidden{display:none !important;}
.right{margin-left:auto;}

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:1000;animation:fadeIn 0.3s;}
.modal .sheet{background:var(--card);border:1px solid var(--line);border-radius:20px;padding:28px;min-width:300px;max-width:600px;width:96%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);}

.kpi{display:flex;gap:10px;align-items:baseline;padding:16px;background:linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);border-radius:12px;margin-bottom:8px;}
.kpi b{font-size:2rem;font-weight:700;background:var(--gradient-1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.kpi span{color:var(--muted);font-size:0.95rem;font-weight:500;}
.list{display:flex;flex-direction:column;gap:10px;}
.list:empty::before{content:'No data to display';color:var(--muted);font-style:italic;padding:20px;text-align:center;}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;}

.error-msg{color:var(--bad);font-size:0.875rem;margin-top:6px;display:none;animation:shake 0.3s;}
.error-msg.show{display:block;}
@keyframes shake{0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}75%{transform:translateX(5px);}}

.status-pill{display:inline-block;padding:6px 14px;border-radius:20px;font-size:0.8rem;font-weight:600;transition:all 0.2s;box-shadow:0 2px 4px var(--shadow);}
.status-pill:hover{transform:translateY(-2px);box-shadow:0 4px 8px var(--shadow-lg);}
.status-pill.open{background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;}
.status-pill.in-progress{background:linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);color:white;}
.status-pill.completed{background:linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);color:white;}
.status-pill.cancelled{background:linear-gradient(135deg, #fa709a 0%, #fee140 100%);color:white;}
.status-pill.waiting{background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);color:#856404;}

.priority-high{color:var(--bad);font-weight:700;text-transform:uppercase;font-size:0.85rem;}
.priority-medium{color:var(--warn);font-weight:700;text-transform:uppercase;font-size:0.85rem;}
.priority-low{color:var(--ok);font-weight:700;text-transform:uppercase;font-size:0.85rem;}

.fade-in{animation:fadeIn 0.5s ease-out;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
@keyframes slideUp{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}

.import-export-section{margin-top:20px;padding-top:20px;border-top:2px solid var(--line);}

.chart-container{height:300px;width:100%;margin-top:16px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);border-radius:12px;padding:20px;}

.team-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:18px;}
.team-member{background:white;border-radius:16px;padding:24px;border:1px solid var(--line);text-align:center;transition:all 0.3s;box-shadow:0 2px 8px var(--shadow);}
.team-member:hover{transform:translateY(-4px);box-shadow:0 8px 24px var(--shadow-lg);}
.team-avatar{width:90px;height:90px;border-radius:50%;background:var(--gradient-1);color:white;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 16px;box-shadow:0 4px 16px var(--shadow-lg);transition:transform 0.3s;}
.team-member:hover .team-avatar{transform:scale(1.1) rotate(5deg);}

.document-list{display:flex;flex-direction:column;gap:12px;}
.document-item{display:flex;align-items:center;gap:14px;padding:16px;border:1px solid var(--line);border-radius:12px;transition:all 0.3s;background:white;box-shadow:0 2px 6px var(--shadow);}
.document-item:hover{transform:translateY(-2px);box-shadow:0 6px 16px var(--shadow-lg);background:var(--hover);}
.document-icon{font-size:1.8rem;color:var(--accent);}
.document-details{flex:1;}
.document-actions{display:flex;gap:10px;}

.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:16px;background:white;border-radius:12px;box-shadow:0 2px 8px var(--shadow);}
.calendar-grid{display:grid;grid-template-columns:repeat(7, 1fr);gap:2px;background:var(--line);border:1px solid var(--line);border-radius:12px;overflow:hidden;box-shadow:0 2px 12px var(--shadow);}
.calendar-day{background:white;min-height:110px;padding:12px;display:flex;flex-direction:column;transition:all 0.2s;}
.calendar-day:hover{background:var(--hover);transform:scale(1.02);}
.calendar-day.other-month{background:var(--chip);color:var(--muted);}
.calendar-day-header{font-weight:700;margin-bottom:6px;color:var(--ink);}
.calendar-event{background:var(--gradient-1);color:white;padding:4px 8px;border-radius:8px;font-size:0.75rem;margin-top:4px;cursor:pointer;transition:all 0.2s;box-shadow:0 2px 4px var(--shadow);}
.calendar-event:hover{transform:translateY(-2px);box-shadow:0 4px 8px var(--shadow-lg);}

.advanced-filters{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px var(--shadow);}
.filter-row{display:flex;gap:14px;flex-wrap:wrap;align-items:flex-end;}

.audit-log{max-height:400px;overflow-y:auto;padding:8px;}
.audit-item{padding:12px;border-bottom:1px solid var(--line);border-radius:8px;margin-bottom:8px;transition:all 0.2s;}
.audit-item:hover{background:var(--hover);transform:translateX(4px);}
.audit-item:last-child{border-bottom:none;}

/* User Belonging System Styles */
.scope-badge{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600;margin-left:10px;color:white;}
.scope-badge.my_data{background:#3b82f6;}
.scope-badge.team_data{background:#10b981;}
.scope-badge.regional_data{background:#f59e0b;}
.scope-badge.project_type_data{background:#8b5cf6;}
.scope-badge.all_data{background:#6366f1;}

.scope-count{font-size:0.85rem;color:var(--muted);margin-left:8px;}

.view-switcher{display:flex;align-items:center;padding:8px 16px;background:var(--card);border-radius:8px;}

.toast-notification{position:fixed;bottom:20px;right:20px;background:#333;color:white;padding:12px 20px;border-radius:8px;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,0.3);font-size:0.9rem;animation:fadeInOut 2s forwards;}

@keyframes fadeInOut{0%{opacity:0;transform:translateY(20px);}15%{opacity:1;transform:translateY(0);}85%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-20px);}}
